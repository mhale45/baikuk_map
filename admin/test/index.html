<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>mMap</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- ì¹´ì¹´ì˜¤ ì§€ë„ -->
    <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=f605c7b72dc7f3083f36483e55e2bc77&libraries=clusterer,services"></script>

    <style>
        :root {
            --header-height: 6rem;
        }

        body {
            margin: 0;
            padding: 0;
        }

        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            z-index: 10000;
            background: #fff;
        }

        #map {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
        }

        header {
            position: fixed;
            z-index: 10000;
        }

    </style>

    <!-- ğŸ”¥ Supabase Client -->
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

        const supabaseUrl = 'https://sfinbtiqlfnaaarziixu.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNmaW5idGlxbGZuYWFhcnppaXh1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1MDkxNjEsImV4cCI6MjA2ODA4NTE2MX0.4-7vnIjbF-biWWuv9-vTxK9Y99gMm-vS6oaRMdRL5fA';

        window.supabase = createClient(supabaseUrl, supabaseKey, {
            auth: { persistSession: true, autoRefreshToken: true }
        });

        // ğŸ”¥ ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸ í›„ ì ‘ì† ë¶ˆê°€í•˜ë©´ listings ë¡œ ì´ë™
        async function enforceAuthForMMap() {
            const { data: { session } } = await window.supabase.auth.getSession();
            if (!session) {
                location.replace("/admin/listings/");
            }
        }

        enforceAuthForMMap();
    </script>

</head>
<body>

    <!-- â–· ê¸°ì¡´ index.html ì˜ í—¤ë” UI ê·¸ëŒ€ë¡œ ë³µì‚¬í•œ ì¶•ì•½ë³¸ â— -->
    <header class="flex items-start gap-4 w-full px-4 pt-2 bg-white shadow-md border-b border-gray-200">
        <!-- ì¹´í…Œê³ ë¦¬ (ì›ë³¸ê³¼ ë™ì¼í•œ ìë¦¬ì§€ë§Œ ì—¬ê¸°ì„  ê°„ë‹¨íˆë§Œ ë‘ ) -->
        <div class="flex flex-col gap-2 mt-1">
            <button class="px-3 py-1 border border-gray-300 rounded bg-gray-100 text-sm">
                ì¹´í…Œê³ ë¦¬1
            </button>
            <button class="px-3 py-1 border border-gray-300 rounded bg-gray-100 text-sm">
                ì¹´í…Œê³ ë¦¬2
            </button>
        </div>

        <!-- ìš°ì¸¡ ë²„íŠ¼ë“¤ -->
        <div class="ml-auto flex items-center gap-2">
            <button class="text-sm text-gray-600 hover:text-black border px-3 py-1 rounded">
                ë¡œê·¸ì•„ì›ƒ
            </button>
        </div>
    </header>

    <!-- ì§€ë„ -->
    <div id="map"></div>

    <script type="module" src="./mMap.js"></script>

</body>
</html>
