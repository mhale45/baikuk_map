<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>임대추천</title>
  <link rel="icon" type="image/png" href="https://sfinbtiqlfnaaarziixu.supabase.co/storage/v1/object/public/baikuk-images-open/pabicon-baikuk-simbol.png" />
  <link rel="preconnect" href="https://sfinbtiqlfnaaarziixu.supabase.co" crossorigin>
  <link rel="dns-prefetch" href="//sfinbtiqlfnaaarziixu.supabase.co">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- 인쇄/테이블/좌측목록 관련 스타일은 그대로 유지 -->
  <style>
    /* === print 전용 설정 === */
    @media print {
      @page { size: A4 landscape; margin: 12mm; }
      html, body { margin:0 !important; padding:0 !important; }
      body > * { display: none !important; }
      #print-portal {
        display: block !important;
        position: static !important;
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      #print-portal table { width: 100% !important; table-layout: fixed; border-collapse: collapse; }
      #print-portal th, #print-portal td { border: 1px solid #ccc; padding: 4px; font-size: 12px; text-align: center; }
      #print-portal thead { background: #f3f4f6; position: static !important; }
      * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    }
  </style>
  <style>
    .shadow-right { box-shadow: 8px 0 12px -4px rgba(0,0,0,0.08); }
    th.resizable { position: relative; min-width: 40px; white-space: nowrap; }
    .resize-handle { position: absolute; right: 0; top: 0; width: .4rem; height: 100%; cursor: col-resize; z-index: 10; background-color: transparent; }
    .customer-item { position: relative; padding: .5rem .5rem; margin-bottom: .25rem; border-radius: .25rem; }
    .customer-item:hover .customer-delete-btn { display: block; }
    .customer-item:active { background-color: #fde68a; }
    .grade-header { background-color: #e5e7eb; color:#000; font-weight: bold; padding:.5rem; border-radius:.25rem; margin-top:.5rem; }
    .name-item { font-size:.9rem; color:#374151; padding:.25rem .5rem; border-radius:.25rem; cursor:pointer; margin-bottom:.4rem; }
    .name-item:hover { background-color:#fef9c3; }
  </style>
  <style>
    table { border-collapse: collapse; width: 50rem; table-layout: fixed; }
    table, th, td { border: 1px solid #ccc; }
    th, td { padding: .25rem; text-align: center; font-size: .875rem; }
    thead { background-color: #f3f4f6; position: sticky; top: 0; z-index: 10; }
    tbody tr:nth-child(odd) { background-color: #fff; }
    tbody tr:nth-child(even) { background-color: #f9fafb; }
  </style>
</head>
<body class="w-screen overflow-x-hidden">
  <div id="toast" class="fixed top-5 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-4 py-2 rounded shadow-lg z-[9999] hidden">
    메시지 영역
  </div>
  <div class="absolute top-0 left-0 z-[9998] bg-white w-[13rem] h-[60px] rounded-xl">
    <img src="https://sfinbtiqlfnaaarziixu.supabase.co/storage/v1/object/public/baikuk-images-open/logotype-baikuk.png"
        alt="글씨로고"
        class="absolute h-11 w-auto cursor-pointer top-2 left-2 z-[9999]"
        onclick="location.reload()" />
  </div>
  <div class="flex min-h-screen">
    <div class="w-[6%] pt-[5rem] shadow-right text-center bg-white">
      <a href="/"><div class="text-lg font-extrabold px-2 py-1 rounded hover:bg-gray-200 cursor-pointer">백억지도</div></a>
      <a href="/admin/listings/"><div class="text-lg font-extrabold px-2 py-1 rounded hover:bg-gray-200 cursor-pointer">매물장부</div></a>
      <!-- ▼ 링크 경로를 하이픈으로 변경 -->
      <a href="/admin/recommend-imDae/"><div class="bg-gray-100 border-l-4 border-gray-500 text-lg font-extrabold px-2 py-1 rounded hover:bg-gray-200 cursor-pointer">임대추천</div></a>
      <a href="/admin/recommend-maeMae/"><div class="text-lg font-extrabold px-2 py-1 rounded hover:bg-gray-200 cursor-pointer">매매추천</div></a>
      <a href="/admin/customer_manage/"><div class="text-lg font-extrabold px-2 py-1 rounded hover:bg-gray-200 cursor-pointer mb-5">모든고객</div></a>
      <a href="/admin/ad_censorship/"><div class="text-lg font-extrabold px-2 py-1 rounded hover:bg-gray-200 cursor-pointer">광고관리</div></a>
      <a href="/admin/performance/"><div class="text-lg font-extrabold px-2 py-1 rounded hover:bg-gray-200 cursor-pointer">매출</div></a>
      <a href="/admin/staff_manage/"><div class="text-lg font-extrabold px-2 py-1 rounded hover:bg-gray-200 cursor-pointer">직원정보</div></a>
    </div>
    <div id="customer-col" class="bg-gray-100 w-[9.5%] pt-[5rem] shadow-right relative z-[10] text-left">
      <div id="customer-list" class="overflow-y-auto">
        <!-- 여기에 고객 이름들이 표시됩니다 -->
      </div>
    </div>
    <div class="w-[84%] flex flex-col bg-gray-100">
      <div class="mt-[2rem] flex px-3 bg-gray-100">
        <div class="text-left text-base rounded outline-none resize-none">
          <div class="flex">
            <input
              type="text"
              placeholder="고객이름"
              class="border border-gray-300 px-2 rounded ml-1 w-[15rem] text-left text-base h-[2rem]"
              id="top-row-input"
            />
            <button id="save-new-customer" class="ml-auto h-[2rem] bg-blue-500 hover:bg-blue-600 text-white text-sm px-2 py-1 rounded font-bold">
              신규저장
            </button>
          </div>
          <div class="flex mt-[0.5rem]">
            <div class="flex">
              <div class="ml-1 mt-1">구분:</div>
              <select id="customer-grade" class="ml-1 px-1 h-[2rem] text-left box-border border border-gray-300 rounded text-base">
                <option>A</option>
                <option>B</option>
                <option>C</option>
                <option>F</option>
              </select>
            </div>
            <input id="customer-phone" placeholder="전화번호" class="w-[15rem] ml-auto px-1 h-[2rem] text-left box-border border border-gray-300 rounded text-base">
          </div>
          <textarea id="memo-textarea" placeholder="메모" class="mt-[0.5rem] ml-1 px-1 pt-1 w-[23rem] h-[45rem] box-border text-left text-base border border-gray-300 rounded bg-white outline-none resize-none"></textarea>
        </div>
        <div class="ml-3 mt-[1rem] flex flex-col">
          <div>
            <button id="print-btn" class="h-[2rem] bg-neutral-500 hover:bg-neutral-600 text-white text-sm px-4 py-1 rounded mr-2 ml-auto mb-2">🖨️</button>
            <button id="copy-link-btn" class="h-[2rem] bg-blue-500 hover:bg-blue-600 text-white text-sm px-4 py-1 rounded mr-2 ml-auto mb-2">링크</button>
          </div>
          <div class="pt-2 px-2 py-2bg-white border border-gray-300 rounded-md">
            <div class="mb-2 text-right">
              <button id="toggle-edit-btn" class="h-[2rem] bg-blue-500 hover:bg-blue-600 text-white text-sm px-4 py-1 rounded">저장</button>
            </div>
            <div id="table-container" class="border rounded-md">
              <table class="w-[7rem] text-sm text-left">
                <thead class="bg-gray-100 sticky top-0 z-10">
                  <tr id="header-row">
                    <th class="p-1 font-bold text-base text-center">매물번호</th>
                  </tr>
                </thead>
                <tbody id="left-tbody" class="bg-white"></tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="ml-6 px-4 py-4 bg-white rounded-md self-start">
          <div id="table-container" class="custom-scroll bg-white rounded-md">
            <div id="print-block">
              <div class="flex items-end mb-2 gap-3">
                <img
                  src="https://sfinbtiqlfnaaarziixu.supabase.co/storage/v1/object/public/biakuk-images//baikuk-logo-yellow_simbol_name.png"
                  alt="백억로고"
                  class="w-[25rem]"
                />
                <div class="justify-between items-end mb-2">
                  <div id="today-date" class="text-gray-600 text-sm font-semibold"></div>
                  <div id="staff-info-container" class="text-gray-800 text-lg font-semibold">
                    <div id="staff-info" class="hidden"></div>
                    <select id="staff-select" class="hidden border border-gray-300 rounded px-2 py-1 text-base"></select>
                  </div>
                </div>
              </div>
              <table>
                <thead>
                  <tr id="header-row">
                    <th style="width: 1.5rem;"></th>
                    <th style="width: 10rem;">매물명</th>
                    <th style="width: 8rem;">주소</th>
                    <th style="width: 8rem;">건물정보</th>
                    <th style="width: 5.5rem;">보증금</th>
                    <th style="width: 4rem;">월세</th>
                    <th style="width: 5.5rem;">권리금</th>
                    <th style="width: 4.7rem;">전용(평)</th>
                    <th style="width: 15rem;">내용</th>
                  </tr>
                </thead>
                <tbody id="listings-body"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ✅ 외부 모듈만 로드 -->
  <script type="module" src="/pages/admin/recommend-imDae/recommend-imDae.js"></script>
</body>
</html>
